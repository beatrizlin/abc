<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <input id="btnWithoutToken" type="button" value="Get Secret Without JWT Token" onclick="getSecretWithoutJWT()" />
    <input id="btnWithToken" type="button" value="Get Secret With JWT Token" onclick="getSecretWithJWT()"/>
    <script src="Scripts/jquery-3.4.1.min.js"></script>
    <script>
        function getSecretWithoutJWT() {
            $.ajax({
                type: 'GET',
                url:'http://localhost:3000/secret'
            }).done(function (result) {
                alert(result);
            }).fail(function (err) {
                alert(err.statusText);
            });
        }

        function getSecretWithJWT() {
            $.ajax({
                type: 'GET',
                url:'http://localhost:3000/jwt'
            }).done(function (jwt) {
                //alert(jwt.token);
                //getSecret(jwt.token);
                alert(jwt);
                getSecret(jwt);
            }).fail(function (err) {
                alert(err.statusText);
            });
        }

        function getSecret(token) {
            $.ajax({
                headers: {
                    Authorization: "Bearer " + token
                },
                type: 'GET',
                url:'http://localhost:3000/secret'
            }).done(function (result) {
                alert(result.message);
            }).fail(function (err) {
                alert(err.statusText);
            });
        }
    </script>
</body>
</html>